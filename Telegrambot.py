from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, ContextTypes

# –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
TOKEN = "6870674489:AAEZcT-C23VY8AK6o-ktWmwhbQZ1pv6J8fo"
google_drive_link_lesson_1 = "https://drive.google.com/file/d/159ubwZNXIyjldfR7SxEnr2z1MABYf02j/view?usp=drive_link"

# –§—É–Ω–∫—Ü–∏—è —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—á–∞—Å—Ç—å 1 –∏ —á–∞—Å—Ç—å 2)
    welcome_message_1 = (
        "–í–∞—Ç-–¥–∏ –≤ –Ω–∞—à–µ–π –¥—Ä—É–∂–Ω–æ–π —Å–µ–º—å–µ —É–ø–æ—Ä–æ—Ç—ã—Ö –ª—é–±–∏—Ç–µ–ª–µ–π –¢–∞–∏–ª–∞–Ω–¥–∞. –ó–¥–µ—Å—å –º—ã –±—É–¥–µ–º —É—á–∏—Ç—å—Å—è —á–∏—Ç–∞—Ç—å –ø–æ-—Ç–∞–π—Å–∫–∏.\n\n"
        "–°–ª–µ–¥—É—é—â–∏–µ 50 —É—Ä–æ–∫–æ–≤ –º—ã –±—É–¥–µ–º —É—á–∏—Ç—å —Ç–∞–π—Å–∫–∏–π –∞–ª—Ñ–∞–≤–∏—Ç –∏ –ø—Ä–∞–≤–∏–ª–∞ —á—Ç–µ–Ω–∏—è, –±–∞–∑–æ–≤—ã–µ –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. "
        "–≠—Ç–æ –Ω–∞–º –ø–æ–º–æ–∂–µ—Ç –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–∞–π—Å–∫–∏—Ö –∑–∞–∫–æ—Ä—é—á–∫–∞—Ö –∏ –ø–æ–∑–Ω–∞—Ç—å —Ç–∞–π—Å–∫–∏–π –¥–∑–µ–Ω."
    )
    welcome_message_2 = (
        "–ö–∞–∂–¥—ã–π —É—Ä–æ–∫ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç–µ–æ—Ä–∏–∏ –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏. –ß–∏—Ç–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è, –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–¥–∞–Ω–∏—è, –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–±—è –≤ —Ç–µ—Å—Ç–µ. "
        "–≠—Ç–æ –≤—Å—ë –¥–ª—è –≤–∞—à–µ–π —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π —Å–≤–æ–±–æ–¥–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ —Ç–æ–º —Ç–µ–º–ø–µ –∏ –æ–±—ä—ë–º–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –∏–º–µ–Ω–Ω–æ –≤–∞–º."
    )
    
    # –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–µ—Ä–≤–æ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
    await update.message.reply_text(welcome_message_1)
    # –û—Ç–ø—Ä–∞–≤–∫–∞ –≤—Ç–æ—Ä–æ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
    await update.message.reply_text(welcome_message_2)
    
    # –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π "–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ"
    keyboard = [
        [InlineKeyboardButton("–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ", callback_data="content")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    # –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    await update.message.reply_text("–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=reply_markup)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏
async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()

    if query.data == "content":
        content_keyboard = [
            [InlineKeyboardButton("–í–≤–æ–¥–Ω–æ–µ —Å–ª–æ–≤–æ", callback_data="intro")],
            [InlineKeyboardButton("–£—Ä–æ–∫–∏ 1-5", callback_data="lessons_1_5")],
            [InlineKeyboardButton("–£—Ä–æ–∫–∏ 6-10", callback_data="lessons_6_10")],
            [InlineKeyboardButton("–£—Ä–æ–∫–∏ 11-15", callback_data="lessons_11_15")],
            [InlineKeyboardButton("–£—Ä–æ–∫–∏ 16-20", callback_data="lessons_16_20")]
        ]
        reply_markup = InlineKeyboardMarkup(content_keyboard)
        await query.edit_message_text("–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:", reply_markup=reply_markup)
    
    elif query.data == "lessons_1_5":
        lessons_keyboard = [
            [InlineKeyboardButton("–£—Ä–æ–∫ 1", callback_data="lesson_1")],
            [InlineKeyboardButton("–£—Ä–æ–∫ 2", callback_data="lesson_2")],
            [InlineKeyboardButton("–£—Ä–æ–∫ 3", callback_data="lesson_3")],
            [InlineKeyboardButton("–£—Ä–æ–∫ 4", callback_data="lesson_4")],
            [InlineKeyboardButton("–£—Ä–æ–∫ 5", callback_data="lesson_5")],
            [InlineKeyboardButton("–ù–∞–∑–∞–¥", callback_data="content")]
        ]
        reply_markup = InlineKeyboardMarkup(lessons_keyboard)
        await query.edit_message_text("–£—Ä–æ–∫–∏ 1-5:", reply_markup=reply_markup)

    elif query.data == "lesson_1":
        lesson_1_messages = [
            "–£—Ä–æ–∫ ‚Ññ1\n\n–ü–µ—Ä–≤—ã–µ –Ω–∞ –æ—á–µ—Ä–µ–¥–∏ —É –Ω–∞—Å —Å–æ–Ω–æ—Ä–Ω—ã–µ —Å–æ–≥–ª–∞—Å–Ω—ã–µ. –û–Ω–∏ –≤—Å–µ –Ω–∏–∑–∫–æ–≥–æ –∫–ª–∞—Å—Å–∞.",
            "[n]  ‡∏ô ‡∏ì\n–ó–≤—É–∫ [n] –≤ –Ω–∞—á–∞–ª–µ —Å–ª–æ–≥–∞ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –¥–≤—É–º—è –±—É–∫–≤–∞–º–∏ –Ω–∏–∑–∫–æ–≥–æ –∫–ª–∞—Å—Å–∞: ‡∏ô [nÕªÕª] ‡∏´‡∏ô‡∏π [nuÃåu] (–º—ã—à–∫–∞) –∏ ‡∏ì [nÕªÕª] ‡πÄ‡∏ì‡∏£ [neen] (–±—É–¥–¥–∏–π—Å–∫–∏–π –ø–æ—Å–ª—É—à–Ω–∏–∫). –¢–∞–∫–∏–º –∂–µ –æ–±—Ä–∞–∑–æ–º —ç—Ç–∏ –±—É–∫–≤—ã –±—É–¥—É—Ç —á–∏—Ç–∞—Ç—å—Å—è –∏ –Ω–∞ –∫–æ–Ω—Ü–µ —Å–ª–æ–≥–∞. –ü–æ–∑–∂–µ –º—ã —É–≤–∏–¥–∏–º, –∫–∞–∫–∏–µ —Å–æ–≥–ª–∞—Å–Ω—ã–µ –±—É–¥—É—Ç –º–µ–Ω—è—Ç—å —Å–≤–æ—ë —á—Ç–µ–Ω–∏–µ –∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è –ø–æ–¥ –∑–≤—É–∫ [n].\n\n–¢–∞–π—Å–∫–∏–π –∑–≤—É–∫ [n] —á—É—Ç—å –º—è–≥—á–µ —Ä—É—Å—Å–∫–æ–≥–æ, –±–ª–∏–∑–æ–∫ –∫ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º—É. –ü—Ä–∏ –ø—Ä–æ–∏–∑–Ω–µ—Å–µ–Ω–∏–∏ —Ç–∞–π—Å–∫–æ–≥–æ –∑–≤—É–∫–∞ –∫–æ–Ω—á–∏–∫ —è–∑—ã–∫–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –∫–∞—Å–∞—Ç—å—Å—è –≤–µ—Ä—Ö–Ω–∏—Ö –∑—É–±–æ–≤, –Ω–æ –¥–æ–ª–∂–µ–Ω —É–ø–∏—Ä–∞—Ç—å—Å—è –≤ —Ç–≤—ë—Ä–¥–æ–µ –Ω—ë–±–æ –∑–∞ –Ω–∏–º–∏. –ü—Ä–∏–º–µ—Ä—ã —Ç–∞–π—Å–∫–∏—Ö —Å–ª–æ–≤: ‡∏ô‡∏≠‡∏ô [n…î…în] (—Å–ø–∞—Ç—å), ‡∏´‡∏ô‡∏≤‡∏ß [naÃåao] (—Ö–æ–ª–æ–¥–Ω—ã–π). –ü–æ–ø—Ä–æ–±—É–π –ø–æ—Å–ª—É—à–∞—Ç—å –∏—Ö –≤ –≥—É–≥–ª–µ –∏–ª–∏ –Ω–∞ Forvo. ",
            "[[m]  ‡∏°\n–ó–≤—É–∫ [m] –≤ –Ω–∞—á–∞–ª–µ –∏ –∫–æ–Ω—Ü–µ —Å–ª–æ–≥–∞ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –±—É–∫–≤–æ–π –Ω–∏–∑–∫–æ–≥–æ –∫–ª–∞—Å—Å–∞ ‚Äî ‡∏° [mÕªÕª] ‡∏°‡πâ‡∏≤ [maÃÅa] (–ª–æ—à–∞–¥—å). –≠—Ç–æ—Ç –∑–≤—É–∫ –º—ã –≤—Å—Ç—Ä–µ—Ç–∏–º –≤ —Ç–∞–∫–∏—Ö —Ç–∞–π—Å–∫–∏—Ö —Å–ª–æ–≤–∞—Ö ‡πÑ‡∏°‡πà [maÃÇi] (–Ω–µ), ‡∏°‡∏µ [mii] (–∏–º–µ—Ç—å), ‡∏°‡∏≤ [maa] (–ø—Ä–∏—Ö–æ–¥–∏—Ç—å). –û–Ω –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω —Ä—É—Å—Å–∫–æ–π ¬´–º¬ª.",
            "[l]  ‡∏• ‡∏¨\n–ó–≤—É–∫ [–ª] –≤ –Ω–∞—á–∞–ª–µ —Å–ª–æ–≥–∞ –≤ —Ç–∞–π—Å–∫–æ–º —è–∑—ã–∫–µ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –¥–≤—É–º—è –±—É–∫–≤–∞–º–∏: ‡∏• [lÕªÕª] ‡∏•‡∏¥‡∏á [ling] (–æ–±–µ–∑—å—è–Ω–∞) –∏ ‡∏¨ [lÕªÕª] ‡∏à‡∏∏‡∏¨‡∏≤ [juÃÄ laa] (–≤–æ–∑–¥—É—à–Ω—ã–π –∑–º–µ–π). –¢–∞–π—Å–∫–∏–π –∑–≤—É–∫ ¬´–ª¬ª —á—É—Ç—å –º—è–≥—á–µ, —á–µ–º —Ä—É—Å—Å–∫–∏–π. –ü—Ä–∏ –µ–≥–æ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–∏ —è–∑—ã–∫ –Ω–µ –¥–æ–ª–∂–µ–Ω –∫–∞—Å–∞—Ç—å—Å—è –≤–µ—Ä—Ö–Ω–∏—Ö –∑—É–±–æ–≤, –æ–Ω –¥–æ–ª–∂–µ–Ω —É–ø–∏—Ä–∞—Ç—å—Å—è –≤ –Ω—ë–±–æ –∑–∞ –Ω–∏–º–∏. –í —Ç–∞–π—Å–∫–æ–º —è–∑—ã–∫–µ –µ–≥–æ –º–æ–∂–Ω–æ —É—Å–ª—ã—à–∞—Ç—å –≤ —Å–ª–æ–≤–∞—Ö ‡πÄ‡∏•‡πá‡∏Å [leÃÅk] (–º–∞–ª–µ–Ω—å–∫–∏–π) –∏–ª–∏ ‡∏•‡∏∑‡∏° [l â âm] (–∑–∞–±—ã–≤–∞—Ç—å).\n\n–ù–∞ –∫–æ–Ω—Ü–µ —Å–ª–æ–≥–∞ ‡∏• –∏ ‡∏¨ –º–µ–Ω—è—é—Ç —Å–≤–æ—ë —á—Ç–µ–Ω–∏–µ! –ö–æ–≥–¥–∞ ‡∏• –∏ ‡∏¨ –∑–∞–∫—Ä—ã–≤–∞—é—Ç —Å–ª–æ–≥, —Ç–æ –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç—Å—è –∑–≤—É–∫ [n]. ",
            "[r]  ‡∏£\n –ó–≤—É–∫ [r] –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –±—É–∫–≤–æ–π ‡∏£ [rÕªÕª] ‡πÄ‡∏£‡∏∑‡∏≠ [r âa] (–ª–æ–¥–∫–∞). –ü–æ–¥–æ–±–Ω—ã–π –∑–≤—É–∫ –º—ã –≤—Å—Ç—Ä–µ—Ç–∏–º –≤ —Å–ª–æ–≤–∞—Ö ‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏° [roong r…õ…õm] (–≥–æ—Å—Ç–∏–Ω–∏—Ü–∞) –∏ ‡∏£‡∏π‡πâ [ruÃÅu] (–∑–Ω–∞—Ç—å). \n\n–ù–∞ –∫–æ–Ω—Ü–µ —Å–ª–æ–≥–∞ –±—É–∫–≤–∞ ‡∏£ [rÕªÕª] ‡πÄ‡∏£‡∏∑‡∏≠ [r âa] –º–µ–Ω—è–µ—Ç —Å–≤–æ—ë —á—Ç–µ–Ω–∏–µ! –ö–æ–≥–¥–∞ ‡∏£ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–ª–æ–≥, –æ–Ω–∞ –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç—Å—è –∫–∞–∫ [n].",
            "–¢–µ–ø–µ—Ä—å –≤–æ–∑—å–º—ë–º –ø–∞—Ä—É –≥–ª–∞—Å–Ω—ã—Ö, —á—Ç–æ–±—ã —Å–∫—É—á–Ω–æ –Ω–µ –±—ã–ª–æ. –ù–∞—á–Ω—ë–º —Å –¥–æ–ª–≥–∏—Ö. –ò—Ö –Ω–∞–¥–æ —Å—Ç–∞—Ä–∞—Ç–µ–ª—å–Ω–æ —Ç—è–Ω—É—Ç—å.\n\n–ó–≤—É–∫ [aa] –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –≤ —Ç–∞–π—Å–∫–æ–º —è–∑—ã–∫–µ —Å –ø–æ–º–æ—â—å—é –±—É–∫–≤—ã ‡∏™‡∏£‡∏∞‡∏≠‡∏≤ [saÃÄ raÃÄ aa ] ‚Äî -‡∏≤. –≠—Ç–∞ –≥–ª–∞—Å–Ω–∞—è —Å—Ç–∞–≤–∏—Ç—Å—è —Å–ø—Ä–∞–≤–∞ –æ—Ç —Å–æ–≥–ª–∞—Å–Ω–æ–π, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π —á–∏—Ç–∞–µ—Ç—Å—è.\n–ù–∞–ø—Ä–∏–º–µ—Ä: ‡∏°‡∏≤ [maa ] –∏–ª–∏ ‡∏ô‡∏≤ [naa]\n\n–ó–≤—É–∫ [ii] –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –±—É–∫–≤—ã ‡∏™‡∏£‡∏∞‡∏≠‡∏µ [saÃÄ raÃÄ ii] ‚Äî‡∏µ, –∫–æ—Ç–æ—Ä–∞—è —Å—Ç–∞–≤–∏—Ç—Å—è –Ω–∞–¥ —Å–æ–≥–ª–∞—Å–Ω–æ–π, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π —á–∏—Ç–∞–µ—Ç—Å—è.\n–ù–∞–ø—Ä–∏–º–µ—Ä: ‡∏°‡∏µ [mii ] –∏–ª–∏ ‡∏•‡∏µ [lii]",
        ]
        for message in lesson_1_messages:
            await query.message.reply_text(message)

        practice_keyboard = [[InlineKeyboardButton("–í–ø–µ—Ä—ë–¥!", callback_data="practice_1")]]
        reply_markup = InlineKeyboardMarkup(practice_keyboard)
        await query.message.reply_text("–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø—Ä–∞–∫—Ç–∏–∫–µ:", reply_markup=reply_markup)
    
    elif query.data == "practice_1":
        practice_messages = [
            "‚úçÔ∏è –ü—Ä–æ–ø–∏—Å–∏ –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º. –ú–æ–∂–µ—à—å —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å —Å–µ–±–µ, –º–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ –≤ —Ç–µ—Ç—Ä–∞–¥–∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤—Å—ë –ø—Ä–æ–ø–∏—Å–∞—Ç—å."
        ]
        for message in practice_messages:
            await query.message.reply_text(message)
        
        # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª
        await query.message.reply_text(
            f"C–∫–∞—á–∞–π —Ñ–∞–π–ª —Å –ø—Ä–æ–ø–∏—Å—è–º–∏ c Google Drive: [–°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª]({google_drive_link_lesson_1})",
            parse_mode="Markdown"
        )
        
        await query.message.reply_text("üßë‚Äçüíª –¢–µ—Å—Ç –ø—Ä–æ—Ö–æ–¥–∏–º")
        
        quiz_keyboard = [[InlineKeyboardButton("–ù–∞—á–∞–ª–∏!", url="t.me/QuizBot?start=UQSwXVxU")]]
        await query.message.reply_text("–ü—Ä–æ–π–¥–∏ —Ç–µ—Å—Ç:", reply_markup=InlineKeyboardMarkup(quiz_keyboard))

        nav_keyboard = [
            [InlineKeyboardButton("–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ", callback_data="content"), InlineKeyboardButton("–£—Ä–æ–∫ 2", callback_data="lesson_2")]
        ]
        await query.message.reply_text("–ö —Å–ª–µ–¥—É—é—â–µ–º—É —É—Ä–æ–∫—É:", reply_markup=InlineKeyboardMarkup(nav_keyboard))

    # –î–æ–±–∞–≤–∏–º –≤–µ—Ç–∫–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–Ω–æ–ø–æ–∫
# –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
def main():
    app = Application.builder().token(TOKEN).build()

    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
    app.add_handler(CommandHandler("start", start))
    app.add_handler(CallbackQueryHandler(button_handler))
    
    # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
    app.run_polling()

if __name__ == "__main__":
    main()